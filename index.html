<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gharana Stays 3D Tour</title>
  <script src="https://cdn.jsdelivr.net/npm/three@0.105.2/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/panolens@0.12.0/build/panolens.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      height: 100%;
      overflow: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #000;
    }
    #branding {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      color: #fff;
      padding: 8px 12px;
      font-size: 13px;
      line-height: 1.4em;
      z-index: 1000;
    }
    #branding h1 {
      font-size: 14px;
      font-weight: normal;
      margin: 2px 0;
    }
    #tour {
      position: absolute;
      top: 100px; /* allow space for branding */
      bottom: 0;
      left: 0;
      right: 0;
    }
    @media screen and (max-width: 600px) {
      #branding {
        font-size: 12px;
        padding: 6px 10px;
      }
      #branding h1 {
        font-size: 12px;
      }
      #tour {
        top: 110px;
      }
    }
  </style>
</head>
<body>
  <div id="branding">
    <h1>üè† Gharana Stays</h1>
    <h1>"Ghar Jaise Comfort, Hostel Jaise Energy"</h1>
    <h1>üìç 3D Tour of Our Property</h1>
    <h1>Explore our beautiful rooms and facilities</h1>
    <h1>üìû Contact Us: +91 7548910219 | +91 6290873280 | +91 90736 48368 | +91 7003053900</h1>
  </div>
  <div id="tour"></div>

  <script>
    const viewer = new PANOLENS.Viewer({
      container: document.getElementById('tour'),
      controlBar: false,
      autoRotate: false,
      cameraFov: 75,
      viewIndicator: false,
      output: 'none'
    });

    function setInitialView(panorama, yaw, pitch) {
      panorama.addEventListener('enter-fade-start', () => {
        const x = 5000 * Math.sin(yaw + Math.PI / 2);
        const y = 5000 * pitch;
        const z = 5000 * Math.cos(yaw + Math.PI / 2);
        viewer.tweenControlCenter(new THREE.Vector3(x, y, z), 0);
      });
    }

    const toVector3 = yaw => {
      const d = 5000;
      const correctedYaw = yaw + Math.PI / 2;
      return new THREE.Vector3(
        d * Math.sin(correctedYaw),
        0,
        d * Math.cos(correctedYaw)
      );
    };

    const scenes = {
      "Hallway1": new PANOLENS.ImagePanorama("Hallway1.jpg"),
      "BalconyDeep": new PANOLENS.ImagePanorama("RoomB3BalconyDeep.jpg"),
      "Balcony": new PANOLENS.ImagePanorama("RoomB3Balcony.jpg"),
      "RoomBathDeep": new PANOLENS.ImagePanorama("Room1Deep.jpg"),
      "Bath1": new PANOLENS.ImagePanorama("Bath1.jpg"),
      "Bath2": new PANOLENS.ImagePanorama("Bath2.jpg"),
      "BalconyMain": new PANOLENS.ImagePanorama("RoomB2Balcony.jpg"),
      "RoomBMID": new PANOLENS.ImagePanorama("RoomB2Main.jpg"),
      "Hallway3": new PANOLENS.ImagePanorama("Hallway3.jpg"),
      "RoomB3": new PANOLENS.ImagePanorama("RoomB3Main.jpg"),
      "Room2": new PANOLENS.ImagePanorama("Room2.jpg"),
      "RoomBath": new PANOLENS.ImagePanorama("Room1Main.jpg"),
      "Kitchen": new PANOLENS.ImagePanorama("Kitchen.jpg"),
      "Hallway2": new PANOLENS.ImagePanorama("Hallway2.jpg")
    };

    const initialViews = {
      "Hallway1": [-1.0157, 0.2108],
      "BalconyDeep": [-0.5022, 0.1103],
      "Balcony": [0.8966, 0.1113],
      "RoomBathDeep": [-2.6121, 0.0388],
      "Bath1": [0, 0],
      "Bath2": [3.1083, 0.1468],
      "BalconyMain": [1.4547, 0.1365],
      "RoomBMID": [2.2674, 0.0375],
      "Hallway3": [-0.4971, 0.0818],
      "RoomB3": [1.3617, 0.1641],
      "Room2": [1.5484, 0.1964],
      "RoomBath": [0.6951, 0.1607],
      "Kitchen": [0.9080, 0.0932],
      "Hallway2": [0.3245, -0.0226]
    };

    let isLoaded = {};
    function loadScene(name) {
      if (!isLoaded[name]) {
        viewer.add(scenes[name]);
        isLoaded[name] = true;
      }
      viewer.setPanorama(scenes[name]);
    }

    Object.entries(scenes).forEach(([name, pano]) => {
      setInitialView(pano, ...initialViews[name]);
    });

    // Hotspot links using functions
    scenes["Hallway1"].link(scenes["Hallway2"], toVector3(-0.213), () => loadScene("Hallway2"));
    scenes["Hallway1"].link(scenes["Bath1"], toVector3(-2.795), () => loadScene("Bath1"));
    scenes["Hallway1"].link(scenes["RoomBath"], toVector3(-3.096), () => loadScene("RoomBath"));

    scenes["RoomBath"].link(scenes["RoomBathDeep"], toVector3(0.971), () => loadScene("RoomBathDeep"));
    scenes["RoomBath"].link(scenes["Hallway1"], toVector3(-2.232), () => loadScene("Hallway1"));
    scenes["RoomBathDeep"].link(scenes["RoomBath"], toVector3(-1.9), () => loadScene("RoomBath"));

    scenes["Bath1"].link(scenes["Hallway1"], toVector3(3.04), () => loadScene("Hallway1"));
    scenes["Bath2"].link(scenes["Hallway2"], toVector3(0.002), () => loadScene("Hallway2"));

    scenes["Hallway2"].link(scenes["Bath2"], toVector3(-2.111), () => loadScene("Bath2"));
    scenes["Hallway2"].link(scenes["RoomBMID"], toVector3(1.23), () => loadScene("RoomBMID"));
    scenes["Hallway2"].link(scenes["Hallway3"], toVector3(-0.045), () => loadScene("Hallway3"));
    scenes["Hallway2"].link(scenes["Kitchen"], toVector3(-0.589), () => loadScene("Kitchen"));
    scenes["Hallway2"].link(scenes["Hallway1"], toVector3(3.015), () => loadScene("Hallway1"));

    scenes["RoomBMID"].link(scenes["Hallway2"], toVector3(-1.029), () => loadScene("Hallway2"));
    scenes["RoomBMID"].link(scenes["BalconyMain"], toVector3(1.673), () => loadScene("BalconyMain"));
    scenes["BalconyMain"].link(scenes["RoomBMID"], toVector3(-2.08), () => loadScene("RoomBMID"));

    scenes["Kitchen"].link(scenes["Hallway2"], toVector3(-2.498), () => loadScene("Hallway2"));

    scenes["Hallway3"].link(scenes["Kitchen"], toVector3(0.556), () => loadScene("Kitchen"));
    scenes["Hallway3"].link(scenes["Hallway2"], toVector3(-0.064), () => loadScene("Hallway2"));
    scenes["Hallway3"].link(scenes["RoomB3"], toVector3(-1.68), () => loadScene("RoomB3"));
    scenes["Hallway3"].link(scenes["Room2"], toVector3(2.931), () => loadScene("Room2"));

    scenes["Room2"].link(scenes["Hallway3"], toVector3(-2.212), () => loadScene("Hallway3"));
    scenes["RoomB3"].link(scenes["Hallway3"], toVector3(-2.162), () => loadScene("Hallway3"));
    scenes["RoomB3"].link(scenes["Balcony"], toVector3(2.108), () => loadScene("Balcony"));

    scenes["Balcony"].link(scenes["RoomB3"], toVector3(-2.587), () => loadScene("RoomB3"));
    scenes["Balcony"].link(scenes["BalconyDeep"], toVector3(0.052), () => loadScene("BalconyDeep"));
    scenes["BalconyDeep"].link(scenes["Balcony"], toVector3(-1.379), () => loadScene("Balcony"));

    loadScene("Hallway1");
  </script>
</body>
</html>
